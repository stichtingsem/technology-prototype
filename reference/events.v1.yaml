openapi: 3.0.0
servers:
  - url: 'https://example.stichtingsem.org/api'
info:
  version: 1.0.0
  title: Generic Event Stream API
  description: |-
    The proposed architecture for the new ecosystem is based on an Event model, where each provider of data to the ecosystem provides a mechanism for other participants to securely subscribe to events that are of interest to them.

    The Event API is the mechanism, in conjunction with the Webhook API, that enables this event based notification mechanism to function reliably.  It enables subscribers to request events from the provider, and paginate through to the last place that it received a message.

    Notes:
      - Pagination is essential - using start and limit semantics.
      - Limits should be imposed on page size.
      - Order should always be reverese chronological.
      - Filtering is available by matching specific event type.
      - Providers should ensure that this API is cacheable or able to be retrieved at minimal cost, as it may be accessed a lot by consumers who are 'catching up'
  contact:
    email: clifton@infinitaslearning.com
  license:
    name: MIT
    url: 'https://opensource.org/licenses/MIT'
tags:
  - name: events
    description: Operations related to event retrieval
paths:
  /events:
    get:
      description: Allows a subscriber to retrieve a list of past events.
      tags:
        - events
      operationId: listEvents
      parameters:
        - in: query
          name: type
          description: 'Filter by a specific type of event, e.g. la.usage - specific to the service implementing the API.'
          schema:
            type: string
            example: la.usage
        - in: query
          name: start
          description: 'Start point for pagination of results, defaults to 0,'
          schema:
            type: integer
          examples:
            default:
              value: 0
              summary: The start point for pagination
        - in: query
          name: limit
          description: 'Limit of number of results returned by page, defaults to 20 with max 100.'
          schema:
            type: integer
            maximum: 100
          examples:
            default:
              value: 20
              summary: The default value if none is provided
            max:
              value: 100
              summary: The largest recommended page size
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/events'
      summary: ''
components:
  schemas:
    events:
      type: array
      items:
        $ref: '#/components/schemas/event'
    event:
      type: object
      required:
        - id
        - type
      properties:
        id:
          type: string
          format: uuid
          example: d290f1ee-6c54-4b01-90e6-d701748f0851
        type:
          type: string
          example: la.usage
        created:
          type: number
          example: 1530291411
        data:
          type: object
